when:
  - event: ["push", "pull_request"]
    branch: ["main"]

engine: nixery

dependencies:
  nixpkgs:
    - cargo
    - rustc
    - rustfmt
    - gcc

steps:
  - name: "cargo fmt"
    command: |
       cargo fmt --all --check
  - name: "cargo test"
    command: |
       cargo test --all --release
